<LoginView>:
    login_user: user
    login_password: password
    Screen:
        MDCard:
            size_hint: 0.9, None  # Adjust the width relative to the screen size
            height: self.minimum_height  # Automatically adjust the height according to the content
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
            elevation: 10
            padding: '10dp'  # Use dp to ensure a consistent size across different resolutions
            spacing: '10dp'
            orientation: 'vertical'

            Image:
                source: root.path_image_login
                size_hint: None, None
                size: '170dp', '170dp'  # Adjust size as needed
                pos_hint: {'center_x': 0.5}

            MDLabel:
                id: welcome_label
                text: 'SIRMG'
                font_size: '32sp'  # Use sp for font size for scalability
                halign: 'center'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: '-3dp'
                bold: True

            MDLabel:
                text: "Clásica"
                halign: 'right'  # Alinea el texto horizontalmente al centro
                size_hint_y: None  # Fuerza al MDLabel a tener una altura específica
                size_hint_x: 0.7
                height: self.texture_size[1]  # Ajusta la altura basándose en el tamaño del texto
                paddig_x: '10dp'
                padding_y: '-3dp'  # Ajusta el espacio vertical entre la imagen y el texto

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDTextField:
                mode: 'round'
                id: user
                hint_text: 'Correo'
                icon_right: 'at'
                size_hint: 0.95, None  # Adjust the size relatively
                height: '48dp'
                font_size: '16sp'
                pos_hint: {'center_x': 0.5}

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDTextField:
                mode: 'round'
                id: password
                hint_text: 'Contraseña'
                icon_right: 'eye-off'
                size_hint: 0.95, None  # Adjust the size relatively
                height: '48dp'
                font_size: '16sp'
                pos_hint: {'center_x': 0.5}
                password: True

            Widget:
                size_hint_y: None
                height: '20dp'  # Spacer adjusted to a relative size

            MDBoxLayout:
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1.05
                spacing: '10dp'
                pos_hint: {'center_x': 0.5}
                padding: '10dp'
                orientation: 'horizontal'

                MDRoundFlatButton:
                    text: 'Iniciar Sesión'
                    font_size: '14sp'
                    size_hint: 0.3, None  # Adjust the size relatively
                    size_hint_y: None  # Use size_hint_y to allow height scaling
                    height: '48dp'
                    on_press: 
                        root.validate_credential()

                MDRoundFlatButton:
                    text: 'Olvidé mi cuenta'
                    font_size: '14sp'
                    size_hint: 0.3, None  # Adjust the size relatively
                    size_hint_y: None  # Use size_hint_y to allow height scaling
                    height: '48dp'
                    on_press: 
                        root.switch_to_forgot_password()
            
            MDTextButton:
                text: '¿No tienes cuenta?'
                font_size: '14sp'
                size_hint_y: None
                pos_hint: {'center_x': 0.5}
                height: '48dp'
                bold: True
                on_press: 
                    root.switch_to_register_view()

<ForgotView>:
    login_user: user
    new_password_user: new_password_user

    Screen:
        MDCard:
            size_hint: 0.9, None  # Adjust the width relative to the screen size
            height: self.minimum_height  # Automatically adjust the height according to the content
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
            elevation: 10
            padding: '10dp'  # Use dp to ensure a consistent size across different resolutions
            spacing: '10dp'
            orientation: 'vertical'

            Image:
                source: root.path_image_login
                size_hint: None, None
                size: '170dp', '170dp'  # Adjust size as needed
                pos_hint: {'center_x': 0.5}

            MDLabel:
                id: welcome_label
                text: 'SIRMG'
                font_size: '32sp'  # Use sp for font size for scalability
                halign: 'center'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: '-3dp'
                bold: True

            MDLabel:
                text: "Clásica"
                halign: 'right'  # Alinea el texto horizontalmente al centro
                size_hint_y: None  # Fuerza al MDLabel a tener una altura específica
                size_hint_x: 0.7
                height: self.texture_size[1]  # Ajusta la altura basándose en el tamaño del texto
                paddig_x: '10dp'
                padding_y: '-3dp'  # Ajusta el espacio vertical entre la imagen y el texto

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDLabel:
                id: welcome_label
                text: 'Resetear contraseña'
                font_size: '14sp'  # Use sp for font size for scalability
                halign: 'left'
                size_hint_y: None
                height: self.texture_size[1]
                # padding_y: '-3dp'
                bold: True

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDTextField:
                mode: 'round'
                id: user
                hint_text: root.hint_text
                icon_right: 'at'
                size_hint: 0.95, None  # Adjust the size relatively
                height: '48dp'
                font_size: '16sp'
                pos_hint: {'center_x': 0.5}

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            BoxLayout:
                id: new_password_user
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDBoxLayout:
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1.05
                spacing: '10dp'
                pos_hint: {'center_x': 0.5}
                padding: '10dp'
                orientation: 'horizontal'

                MDRoundFlatButton:
                    text: root.button_text
                    font_size: '14sp'
                    size_hint: 0.3, None  # Adjust the size relatively
                    size_hint_y: None  # Use size_hint_y to allow height scaling
                    height: '48dp'
                    on_press: 
                        root.password_recovery()
                        
                MDRoundFlatButton:
                    text: 'Regresar'
                    font_size: '14sp'
                    size_hint: 0.3, None  # Adjust the size relatively
                    size_hint_y: None  # Use size_hint_y to allow height scaling
                    height: '48dp'
                    on_press: 
                        root.switch_to_login()

<RegisterView>:        
    name_user: name_user
    email_user: email_user
    password_user: password_user

    Screen:
        MDCard:
            size_hint: 0.9, None  # Adjust the width relative to the screen size
            height: self.minimum_height  # Automatically adjust the height according to the content
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
            elevation: 10
            padding: '10dp'  # Use dp to ensure a consistent size across different resolutions
            spacing: '10dp'
            orientation: 'vertical'

            Image:
                source: root.path_image_login
                size_hint: None, None
                size: '170dp', '170dp'  # Adjust size as needed
                pos_hint: {'center_x': 0.5}

            MDLabel:
                id: welcome_label
                text: 'SIRMG'
                font_size: '32sp'  # Use sp for font size for scalability
                halign: 'center'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: '-3dp'
                bold: True

            MDLabel:
                text: "Clásica"
                halign: 'right'  # Alinea el texto horizontalmente al centro
                size_hint_y: None  # Fuerza al MDLabel a tener una altura específica
                size_hint_x: 0.7
                height: self.texture_size[1]  # Ajusta la altura basándose en el tamaño del texto
                paddig_x: '10dp'
                padding_y: '-3dp'  # Ajusta el espacio vertical entre la imagen y el texto

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDLabel:
                id: welcome_label
                text: 'Crear cuenta'
                font_size: '14sp'  # Use sp for font size for scalability
                halign: 'left'
                size_hint_y: None
                height: self.texture_size[1]
                # padding_y: '-3dp'
                bold: True

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDTextField:
                mode: 'round'
                id: name_user
                hint_text: "Nombre y Apellido"
                icon_right: 'account'
                size_hint: 0.95, None  # Adjust the size relatively
                height: '48dp'
                font_size: '16sp'
                pos_hint: {'center_x': 0.5}

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDTextField:
                mode: 'round'
                id: email_user
                hint_text: "Correo"
                icon_right: 'at'
                size_hint: 0.95, None  # Adjust the size relatively
                height: '48dp'
                font_size: '16sp'
                pos_hint: {'center_x': 0.5}

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDTextField:
                mode: 'round'
                id: password_user
                hint_text: 'Contraseña'
                icon_right: 'eye-off'
                size_hint: 0.95, None  # Adjust the size relatively
                height: '48dp'
                font_size: '16sp'
                pos_hint: {'center_x': 0.5}
                password: True

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDBoxLayout:
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1.05
                spacing: '10dp'
                pos_hint: {'center_x': 0.5}
                padding: '10dp'
                orientation: 'horizontal'

                MDRoundFlatButton:
                    text: "Crear cuenta"
                    font_size: '14sp'
                    size_hint: 0.3, None  # Adjust the size relatively
                    size_hint_y: None  # Use size_hint_y to allow height scaling
                    height: '48dp'
                    on_press: 
                        root.create_account()
                        
                MDRoundFlatButton:
                    text: 'Regresar'
                    font_size: '14sp'
                    size_hint: 0.3, None  # Adjust the size relatively
                    size_hint_y: None  # Use size_hint_y to allow height scaling
                    height: '48dp'
                    on_press: 
                        root.switch_to_login()

<PrincipalView>:        
    Screen:
        MDCard:
            size_hint: 0.9, None  # Adjust the width relative to the screen size
            height: self.minimum_height  # Automatically adjust the height according to the content
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
            elevation: 10
            padding: '10dp'  # Use dp to ensure a consistent size across different resolutions
            spacing: '10dp'
            orientation: 'vertical'

            MDLabel:
                id: welcome_label
                text: 'Bienvenido'
                font_size: '15sp'  # Use sp for font size for scalability
                halign: 'left'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: '-1dp'
                bold: True

            MDLabel:
                text: root.user_name
                font_size: '12sp'
                halign: 'left'  # Alinea el texto horizontalmente al centro
                size_hint_y: 0.3  # Fuerza al MDLabel a tener una altura específica
                size_hint_x: 0.7
                height: self.texture_size[1]  # Ajusta la altura basándose en el tamaño del texto

            Widget:
                size_hint_y: None
                height: '10dp'  # Spacer adjusted to a relative size

            MDFillRoundFlatIconButton:
                text: '¡Practicar Ahora!'
                font_size: '14sp'
                icon: 'guitar-acoustic'  # Reemplaza 'icon_name' con el nombre del ícono que deseas usar
                size_hint_x: 1
                size_hint_y: None
                height: '48dp'
                pos_hint: {'center_x': 0.5}
                on_press: 
                    root.select_song()

            MDBoxLayout:
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1.05
                spacing: '10dp'
                pos_hint: {'center_x': 0.5}
                padding: '10dp'
                orientation: 'horizontal'

                MDBoxLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    size_hint_x: 1.05
                    spacing: '0dp'
                    pos_hint: {'center_x': 0.5}
                    padding: '10dp'
                    orientation: 'vertical'

                    MDIconButton:
                        icon: 'note-check'  # Reemplaza 'icon_name' con el nombre del ícono que deseas usar
                        user_font_size: '24sp'  # Ajusta el tamaño del ícono según sea necesario
                        theme_text_color: 'Custom'
                        text_color: 1, 1, 1, 1  # Ajusta el color del ícono (aquí está en blanco)
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_instructions()

                    MDTextButton:
                        text: 'Instrucciones'
                        font_size: '14sp'
                        size_hint_y: None
                        height: self.texture_size[1]
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_instructions()

                MDBoxLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    size_hint_x: 1.05
                    spacing: '0dp'
                    pos_hint: {'center_x': 0.5}
                    padding: '10dp'
                    orientation: 'vertical'

                    MDIconButton:
                        icon: 'history'  # Reemplaza 'icon_name' con el nombre del ícono que deseas usar
                        user_font_size: '24sp'  # Ajusta el tamaño del ícono según sea necesario
                        theme_text_color: 'Custom'
                        text_color: 1, 1, 1, 1  # Ajusta el color del ícono (aquí está en blanco)
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_history()

                    MDTextButton:
                        text: 'Historial'
                        font_size: '14sp'
                        size_hint_y: None
                        height: self.texture_size[1]
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_history()

            MDBoxLayout:
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1.05
                spacing: '10dp'
                pos_hint: {'center_x': 0.5}
                padding: '10dp'
                orientation: 'horizontal'

                MDBoxLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    size_hint_x: 1.05
                    spacing: '0dp'
                    pos_hint: {'center_x': 0.5}
                    padding: '10dp'
                    orientation: 'vertical'

                    MDIconButton:
                        icon: 'account-edit'  # Reemplaza 'icon_name' con el nombre del ícono que deseas usar
                        user_font_size: '24sp'  # Ajusta el tamaño del ícono según sea necesario
                        theme_text_color: 'Custom'
                        text_color: 1, 1, 1, 1  # Ajusta el color del ícono (aquí está en blanco)
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_new_password()

                    MDTextButton:
                        text: 'Nueva contraseña'
                        font_size: '14sp'
                        size_hint_y: None
                        height: self.texture_size[1]
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_new_password()

                MDBoxLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    size_hint_x: 1.05
                    spacing: '0dp'
                    pos_hint: {'center_x': 0.5}
                    padding: '10dp'
                    orientation: 'vertical'

                    MDIconButton:
                        icon: 'logout'  # Reemplaza 'icon_name' con el nombre del ícono que deseas usar
                        user_font_size: '24sp'  # Ajusta el tamaño del ícono según sea necesario
                        theme_text_color: 'Custom'
                        text_color: 1, 1, 1, 1  # Ajusta el color del ícono (aquí está en blanco)
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_logout()

                    MDTextButton:
                        text: 'Cerrar sesión'
                        font_size: '14sp'
                        size_hint_y: None
                        height: self.texture_size[1]
                        pos_hint: {'center_x': 0.5}
                        on_press: 
                            root.run_logout()

<CaptureARView>:
    BoxLayout:
        Camera:
            id: camera
            resolution: root.camera_resolution
            play: True
            canvas.before:
                PushMatrix
                Rotate:
                    angle: -90
                    origin: self.center
            canvas.after:
                PopMatrix

<ShowFrameProcessed>:
    ProcessedFrame:
        id: processed_frame

<Manager>:
    id: screen_manager

    login_view: login_view
    register_view: register_view
    forgot_password: forgot_password
    principal_view: principal_view
    capture_ar_view: capture_ar_view
    processed_frame_view: processed_frame_view

    LoginView:
        id: login_view
        name: "login_view"
        manager: screen_manager

    RegisterView:
        id: register_view
        name: "register_view"
        manager: screen_manager

    ForgotView:
        id: forgot_password
        name: "forgot_password"
        manager: screen_manager

    PrincipalView:
        id: principal_view
        name: "principal_view"
        manager: screen_manager

    CaptureARView:
        id: capture_ar_view
        name: "capture_ar_view"
        manager: screen_manager

    ProcessedFrame:
        id: processed_frame_view
        name: "processed_frame_view"
        manager: screen_manager

<P>:
    Label:
        text: root.text
        size_hint: 0.6, 0.1
        pos_hint: {"x":0.2, "top":0.7}

    Button:
        text: "Cerrar"
        size_hint: 0.8, 0.3
        pos_hint: {"x":0.1, "y":0.1}
        on_release: root.popup.dismiss()